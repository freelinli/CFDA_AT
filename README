# CFDA_AT


----------------------------------------------------------------------------------------------------------------------------------------
2018/1/14 20:40
更新AT指令透传，仍需要完善
增加读取路径代码，待完善


----------------------------------------------------------------------------------------------------------------------------------------
2018/1/13 08:20

1 完成时间查询的功能
2 去除测试指令

目前剩余指令：5.9 7.1 7.2 8.2四条


//查询通信延时相关广播通信时长

AT+BRDDT?

4



AT+RTC=370112163630


AT+RTC?




----------------------------------------------------------------------------------------------------------------------------------------
2018/1/11 20:40


1 修正AT指令集。
2 完善核对到 5.8 NDEL（删除从节点）。
3 增加相关基础代码。



----------------------------------------------------------------------------------------------------------------------------------------
2018/1/9 13:40

1 增加相关指令
2 增加“AT_readme”文件夹，内含协同文件，AT命令范例，at执行顺序表（12个未完成）
 
 
// NINFO（从节点信息查询）10 F2

AT+NINFO=1,6

6,666666666666,9,0,666666666666,9,0,666666666666,9,0,666666666666,9,0,666666666666,9,0,666666666666,9,0

AT+NINFO=1,26

ERROR:94

AT+NINFO=1,3

0


//NLST（未能抄读成功的从节点信息查询）10 F5

AT+NLST=1,6

6,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666

AT+NLST=1,26

ERROR:95

AT+NLST=1,25

25,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666,666666666666



//查询微功率无线从节点信息 10 F101

AT+NPWR?

30,20,156001020000,9,2,0.0,E7E7E7E7E7E7,9,/,0.0,E754F0F0F0F0,9,0,0.0,585858585858,9,0,0.0,D9172D423620,9,0,0.0,88887C123456,9,0,0.0,654321AAD0D0,9,0,0.0,888888888888,9,0,0.0,C12345665432,9,0,0.0,123123123123,9,0,0.0,123456654321,9,0,0.0,12312312422C,9,0,0.0,23457654320C,9,0,0.0,23123123822C,9,0,0.0,23456654920C,9,0,0.0,53123123122C,9,0,0.0,63456654320C,9,0,0.0,23123123820D,9,0,0.0,6345665432ED,9,0,0.0,163456654321,9,0,0.0

30,10,723123123823,9,0,0.0,123123122423,9,0,0.0,123123124234,9,0,0.0,823456654921,9,0,0.0,953123123123,9,0,0.0,063456654321,9,0,0.0,123123123141,9,0,0.0,123123123199,9,0,0.0,123123123188,9,0,0.0,123123123110,9,0,0.0

AT+NPWR?

ERROR:96



//读取档案  读取档案 OAH  52
AT+RAR?

0,29,156001020000,E7E7E7E7E7E7,E754F0F0F0F0,585858585858,D9172D423620,88887C123456,654321AAD0D0,888888888888,C12345665432,123123123123,123456654321,12312312422C,23457654320C,23123123822C,23456654920C,53123123122C,63456654320C,23123123820D,6345665432ED,000000000000,000000000000,000000000000,000000000000,163456654321,723123123823,123123122423,123123124234,823456654921,953123123123,063456654321

30,33,123123123141,123123123199,123123123188,123123123110



 
 

----------------------------------------------------------------------------------------------------------------------------------------
2018/1/8 19:20


1 完善ASCII_2_HEX_AT与HEX_2_ASCII_AT
2 增加以下相关指令

// 查询主动注册从节点信息 10H F6

AT+AREG=1,2

2,666666666661,9,0,666666666662,9,0


AT+AREG=1,10

10,666666666661,9,0,666666666662,9,0,666666666663,9,0,666666666664,9,0,666666666665,9,0,666666666667,9,0,666666666668,9,0,666666666669,9,0,666666666616,9,0,666666666626,9,0

AT+AREG=1,30

ERROR:93

// CAC 验证

AT+CACV=12345678

50578E18



----------------------------------------------------------------------------------------------------------------------------------------

2018/1/8 15:40

1 增加相关doxygen格式注释，后续根据需要进行完善。
2 修改 NUM_2_ASCII_AT 函数
3 修改 ASCII_2_HEX_AT 函数
4 增加以下相关指令



// 查询通信延时相关的广播时长 03H  F9

AT+BRDDT=1,3,abc

2,1,3,abc


AT+BRDDT=1,10,abcabcabca

2,1,10,abcabcabca


AT+BRDDT=4,10,abcabcabca

ERROR:89

AT+BRDDT=4,10,abcabcab

ERROR:89

AT+BRDDT=2,1000,abcabcab

ERROR:90


AT+BRDDT=2,7,abcabca

2,2,7,abcabca


// 查询路由运行状态  10H  F4  

AT+RTST?

1,1,1,0,255,0,0,0,0,0,0




//  添加从节点  11H  F1  

AT+NADD=2,123123123123,123456654321

OK

AT+NADD=50,123123123123,123456654321

ERROR


AT+NADD=12,123123123123,123456654321,123123124234,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321

OK


AT+NADD=9,123123123123,123456654321,123123122423,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823

OK

AT+NADD=36,123123123123,123456654321,123123124234,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321,123123123124,123456654326,123123124238,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321,123123123125,123456654327,123123124239,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321

ERROR:91


AT+NADD=1,123123123199

OK



// 删除从节点  11H  F2


AT+NADD=6,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823

OK


AT+NDEL=2,123457654321,123123123823

OK


AT+NADD=6,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823

OK


AT+NDEL=5,123457654321,123123123823,123456654921,153123123123,163456654322

ERROR:5

OK

AT+NDEL=36,123123123123,123456654321,123123124234,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321,123123123124,123456654326,123123124238,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321,123123123125,123456654327,123123124239,123457654321,123123123823,123456654921,153123123123,163456654321,723123123823,823456654921,953123123123,063456654321

ERROR:92



----------------------------------------------------------------------------------------------------------------------------------------
2018/1/7   20:30

// 查询CAC状态 F0H F1

AT+CACS?
 
2,0,0,0





----------------------------------------------------------------------------------------------------------------------------------------
2018/1/7   20:00
指令增加


// 实现从节点点名 04H F2

AT+NRC

OK

// 查主节点状态字及通信速率 03H  F5

AT+SCCR?

1,0,4,31,0,0,0,0  

AT+SCCR?
 
1,0,1,31,0  


// 发送测试 04H  F1 注意等待时间不要过长


AT+TSST=100

OK

AT+TSST=5

OK

AT+TSST=300

ERROR:87

// 透传数据到掌机  AT+TTTH


AT+TTTH=5,abcde7

ERROR

AT+TTTH=513,abcde

ERROR:88

----------------------------------------------------------------------------------------------------------------------------------------
2018/1/7
指令增加


// 实现从节点点名 04H F2

AT+NRC

OK

// 查主节点状态字及通信速率 03H  F5

AT+SCCR?

1,0,4,31,0,0,0,0  

AT+SCCR?
 
1,0,1,31,0  


// 发送测试 04H  F1 注意等待时间不要过长


AT+TSST=100

OK

AT+TSST=5

OK

AT+TSST=300

ERROR:87

// 透传数据到掌机  AT+TTTH


AT+TTTH=5,abcde7

ERROR

AT+TTTH=513,abcde

ERROR:88




----------------------------------------------------------------------------------------------------------------------------------------
2018/1/7
第一次版本上传与完善，实现功能接口框架及以下功能



// 01H F1 硬件初始化 

AT+HINT
OK

// 05H F1 设置主节点地址

AT+HNA=123456789012
OK

// 03H F4 查询主节点地址
AT+HNA?
123456789012

0D 31 12 33 34 35 36 37 38 39 30 31 32 0D 


// 03H F1 查询版本信息  
AT+MVINFO?
CFMJ,170816,80.03,CFMJ,170816,2.0

// 03H F100 查询场强门限

AT+RSSIT?

96


// 05H F100 设置场强门限
AT+RSSIT=100

OK

AT+RSSIT=50

OK


AT+RSSIT=140

ERROR:81


AT+RSSIT=97

OK

AT+RSSIT=?
Invalid command

// 读取从节点数量 10H F1

AT+NNUM?

4,601
// 参数区初始化 01 F2 01H F3
AT+PINT

OK


// 读取内部版本号 F0H F101
AT+RIV?

17,128.3,36

//查询真实频道号 F0H F102
AT+CACRC?

9


//查询网络规模 10H F100
AT+SSCL?

4


//设置网络规模 11H F100
AT+SSCL=14

OK

// 设置中心节点时间 05H F101

AT+RTC=163330

OK


// 查询中心节点时间 03H F101

AT+RTC?

163459


//读取从节点监控最大超时时间

AT+NMMT?

60


//设置从节点监控最大超时时间

AT+NMMT=20

OK


AT+NMMT=2000

ERROR:84


AT+NMMT=256

ERROR:84

// 启动维护 11H F101

AT+RTMT

OK


//启动组网  11H F102


AT+RTRS

OK


//路由请求集中器时钟  14H F2

AT+GCLK=131212

OK

AT+RTC?

AT+GCLK=131214




// 查询无线通信参数 03H F8

AT+HNCP?

1,0




// 设置无线通信参数 05H F5

AT+HNCP=2,3

OK

AT+HNCP=10,3

OK


AT+HNCP=10,2

OK

AT+HNCP=13,5

ERROR:86

ERROR:85

// 允许/禁止从节点上报 05H F2
AT+NEREP=1

OK

AT+NEREP=0

OK

AT+NEREP=2
 
ERROR
